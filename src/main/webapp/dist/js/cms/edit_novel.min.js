function EditNovel(){}EditNovel.prototype.listenUploadFileEvent=function(){$("#thumbnail-btn").change(function(){var e=$(this)[0].files[0],t=new FormData;t.append("file",e),myajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){var t;200===e.code&&(t=e.data.url,$("#cover_url-form").val(t))}})})},EditNovel.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";EditNovel.progressGroup.show();var i=EditNovel.progressBar;i.css("width",t),i.text(t)},EditNovel.prototype.handleFileUploadError=function(e){EditNovel.progressGroup.hide(),console.log(result.message)},EditNovel.prototype.handleFileUploadComplete=function(e){EditNovel.progressGroup.hide();var t="http://q0i4557d7.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t)},EditNovel.prototype.listenQiniuUploadFileEvent=function(){var d=this;$("#thumbnail-btn").change(function(){var l=this.files[0];myajax.get({url:"/cms/qntoken/",success:function(e){var t,i,a,n,o,r;200===e.code&&(t=e.data.token,a={fname:i=(new Date).getTime()+"."+l.name.split(".")[1],params:{},mimeType:["image/png","image/jpeg","image/gif","video/mp4"]},n={useCdnDomain:!0,retryCount:6,region:qiniu.region.z1},o=qiniu.upload(l,i,t,a,n),r={next:d.handleFileUploadProgress,error:d.handleFileUploadError,complete:d.handleFileUploadComplete},o.subscribe(r))}})})},EditNovel.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(){event.preventDefault();var e=$(this).attr("data-novel-id"),t=$("input[name='name']").val(),i=$("input[name='cover_url']").val(),a=$("select[name='category_id']").val(),n=$('input[name="tag_id"]:checked').val(),o=$("input[name='price']").val(),r=window.ue.getContent();url="/cms/update_novel/",myajax.post({url:url,data:{name:t,cover_url:i,category_id:a,tag_id:n,profile:r,price:o,id:e},success:function(e){200===e.code?xfzalert.alertSuccess("恭喜，小说编辑成功！",function(){window.location="/cms/novel_list/"}):console.log(e)}})})},EditNovel.prototype.initCategory=function(){var p=$("#category-form"),s=(s=p.attr("data-category-id"))?parseInt(s):1,c=$(".radio-group"),u=(u=c.attr("data-tag-id"))&&parseInt(u);myajax.get({url:"/cms/get_cate_list/",success:function(e){if(200===e.code){var l=e.data.cate_list;for(var t in l){var i=l[t];s&&s===i.id?p.append('<option value="'+i.id+'" selected>'+i.name+"</option>"):p.append('<option value="'+i.id+'">'+i.name+"</option>")}for(var t in l)if(s===l[t].id){var a=l[t].tags;for(var n in a){var o=a[n],r=$('<label class="radio-inline"></label>'),d="",d=u&&u===o.id?$('<input type="radio" name="tag_id" value="'+o.id+'" checked>'):$('<input type="radio" name="tag_id" value="'+o.id+'">');r.append(d),r.append(" "+o.name),c.append(r)}break}p.change(function(){c.empty();var e=parseInt($(this).val());for(var t in l)if(e===l[t].id){var i=l[t].tags;for(var a in i){var n=i[a],o=$('<label class="radio-inline"></label>'),r=$('<input type="radio" name="tag_id" value="'+n.id+'">');o.append(r),o.append(" "+n.name),c.append(o)}}})}}})},EditNovel.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},EditNovel.prototype.listenIsFreeEvent=function(){var e=$("select[name='is_free']"),t=$("input[name='price']");"1"===e.val()&&t.show(),e.change(function(){"0"===$(this).val()?(t.val(0),t.hide()):"1"===$(this).val()&&(t.val(0),t.show())}),t.change(function(){0===$(this).val()&&(e.children().eq(0).prop("selected","selected"),$(this).hide())})},EditNovel.prototype.run=function(){this.initCategory(),this.listenUploadFileEvent(),this.initUEditor(),this.listenSubmitEvent(),this.listenIsFreeEvent()},$(function(){(new EditNovel).run(),EditNovel.progressGroup=$("#progress-group"),EditNovel.progressBar=$(".progress-bar")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY21zL2VkaXRfbm92ZWwubWluLmpzIiwic291cmNlcyI6WyJjbXMvZWRpdF9ub3ZlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBFZGl0Tm92ZWwoKXtcclxuXHJcbn1cclxuXHJcbi8vIOebkeWQrOS4iuS8oOWbvueJh+S6i+S7tlxyXG5FZGl0Tm92ZWwucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTsgICAgLy8gaW5wdXRcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZmlsZSA9ICQodGhpcylbMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKTtcclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdmVyVXJsSW5wdXQgPSAkKCcjY292ZXJfdXJsLWZvcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3ZlclVybElucHV0LnZhbCh1cmwpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIOWbvueJh+S4iuS8oOi/h+eoi+S4rVxyXG5FZGl0Tm92ZWwucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICB2YXIgdG90YWwgPSByZXN1bHQudG90YWw7XHJcbiAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7ICAgIC8vIGludCAg5LiK5Lyg55m+5YiG5q+UXHJcbiAgICB2YXIgcGVyY2VudFRleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkgKyAnJSc7ICAgICAvLyDljrvpmaTlsI/mlbDpg6jliIZcclxuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gRWRpdE5vdmVsLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9IEVkaXROb3ZlbC5wcm9ncmVzc0JhcjtcclxuICAgIHByb2dyZXNzQmFyLmNzcygnd2lkdGgnLHBlcmNlbnRUZXh0KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpXHJcbn07XHJcblxyXG4vLyDlm77niYfkuIrkvKDplJnor69cclxuRWRpdE5vdmVsLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkRXJyb3IgPSBmdW5jdGlvbihlcnJvcil7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IEVkaXROb3ZlbC5wcm9ncmVzc0dyb3VwO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XHJcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQubWVzc2FnZSlcclxufTtcclxuXHJcbi8vIOWbvueJh+S4iuS8oOaIkOWKn1xyXG5FZGl0Tm92ZWwucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIC8vIHJlc3BvbnNlOiAgICB7IGhhc2g6IC4uLiAsIGtleTogLi4uIH1cclxuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gRWRpdE5vdmVsLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuICAgIHZhciBkb21haW4gPSAnaHR0cDovL3EwaTQ1NTdkNy5ia3QuY2xvdWRkbi5jb20vJztcclxuICAgIHZhciBmaWxlbmFtZSA9IHJlc3BvbnNlLmtleTtcclxuICAgIHZhciB1cmwgPSBkb21haW4gKyBmaWxlbmFtZTtcclxuICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKTtcclxuICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpXHJcbn07XHJcblxyXG4vLyDlsIblm77niYfkuIrkvKDliLDkuIPniZvkupFcclxuRWRpdE5vdmVsLnByb3RvdHlwZS5saXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xyXG4gICAgdGh1bWJuYWlsSW5wdXQuY2hhbmdlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8g6I635Y+W5paH5Lu2XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvcW50b2tlbi8nLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyDojrflj5Z0b2tlbuWAvFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiuvue9ruaWh+S7tuWQjVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogW1wiaW1hZ2UvcG5nXCIsXCJpbWFnZS9qcGVnXCIsXCJpbWFnZS9naWZcIixcInZpZGVvL21wNFwiXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOnRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnoxLCAgICAgICAgICAgIC8vIHox5Luj6KGo5Y2O5YyX5Zyw5Yy6XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLGtleSx0b2tlbixwdXRFeHRyYSxjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Lul5LiL5Ye95pWw5Lit55qEdGhpc+S4jeS7o+ihqEVkaXROb3ZlbOWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbXBsZXRlJzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkQ29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDnvJbovpHlsI/or7RcclxuRWRpdE5vdmVsLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJCgnI3N1Ym1pdC1idG4nKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7ICAgICAgIC8vIOmYu+atoum7mOiupOS6i+S7tlxyXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBub3ZlbElkID0gYnRuLmF0dHIoJ2RhdGEtbm92ZWwtaWQnKTtcclxuICAgICAgICB2YXIgbmFtZSA9ICQoXCJpbnB1dFtuYW1lPSduYW1lJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvdmVyX3VybCA9ICQoXCJpbnB1dFtuYW1lPSdjb3Zlcl91cmwnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5X2lkJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHRhZ19pZCA9ICQoJ2lucHV0W25hbWU9XCJ0YWdfaWRcIl06Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgIHZhciBwcmljZSA9ICQoXCJpbnB1dFtuYW1lPSdwcmljZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBwcm9maWxlID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuICAgICAgICB1cmwgPSAnL2Ntcy91cGRhdGVfbm92ZWwvJztcclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ25hbWUnOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2NvdmVyX3VybCc6IGNvdmVyX3VybCxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3RhZ19pZCc6IHRhZ19pZCxcclxuICAgICAgICAgICAgICAgICdwcm9maWxlJzogcHJvZmlsZSxcclxuICAgICAgICAgICAgICAgICdwcmljZSc6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgJ2lkJzogbm92ZWxJZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICfmga3llpzvvIzlsI/or7TnvJbovpHmiJDlip/vvIEnO1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhtZXNzYWdlLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvY21zL25vdmVsX2xpc3QvJztcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g5Yid5aeL5YyW5YiG57G75ZKM5qCH562+XHJcbkVkaXROb3ZlbC5wcm90b3R5cGUuaW5pdENhdGVnb3J5ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxlY3QgPSAkKCcjY2F0ZWdvcnktZm9ybScpO1xyXG4gICAgdmFyIGNhdGVnb3J5SWQgPSBzZWxlY3QuYXR0cignZGF0YS1jYXRlZ29yeS1pZCcpO1xyXG4gICAgY2F0ZWdvcnlJZCA9IGNhdGVnb3J5SWQgPyBwYXJzZUludChjYXRlZ29yeUlkKSA6IDE7XHJcblxyXG4gICAgdmFyIHJhZGlvR3JvdXAgPSAkKCcucmFkaW8tZ3JvdXAnKTtcclxuICAgIHZhciB0YWdJZCA9IHJhZGlvR3JvdXAuYXR0cignZGF0YS10YWctaWQnKTtcclxuICAgIGlmKHRhZ0lkKVxyXG4gICAgICAgIHRhZ0lkID0gcGFyc2VJbnQodGFnSWQpO1xyXG5cclxuICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9nZXRfY2F0ZV9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgIHZhciBjYXRlTGlzdCA9IHJlc3VsdFsnZGF0YSddWydjYXRlX2xpc3QnXTtcclxuICAgICAgICAgICAgICAgIC8vIOWIneWni+WMluWIhuexu1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGNhdGVMaXN0KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSBjYXRlTGlzdFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjYXRlZ29yeUlkICYmIGNhdGVnb3J5SWQgPT09IGNhdGVnb3J5LmlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0LmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT1cIicrY2F0ZWdvcnkuaWQrJ1wiIHNlbGVjdGVkPicrY2F0ZWdvcnkubmFtZSsnPC9vcHRpb24+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPVwiJytjYXRlZ29yeS5pZCsnXCI+JytjYXRlZ29yeS5uYW1lKyc8L29wdGlvbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5Yid5aeL5YyW5qCH562+XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gY2F0ZUxpc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhdGVnb3J5SWQgPT09IGNhdGVMaXN0W2ldWydpZCddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ3MgPSBjYXRlTGlzdFtpXVsndGFncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogaW4gdGFncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHRhZ3Nbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSAkKCc8bGFiZWwgY2xhc3M9XCJyYWRpby1pbmxpbmVcIj48L2xhYmVsPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZGlvID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YWdJZCAmJiB0YWdJZCA9PT0gdGFnWydpZCddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlvID0gJCgnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ0YWdfaWRcIiB2YWx1ZT1cIicgKyB0YWdbJ2lkJ10gKyAnXCIgY2hlY2tlZD4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpbyA9ICQoJzxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwidGFnX2lkXCIgdmFsdWU9XCInICsgdGFnWydpZCddICsgJ1wiPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuYXBwZW5kKHJlZGlvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZCgnICcgKyB0YWdbJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpb0dyb3VwLmFwcGVuZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWIhuexu+aUueWPmOaXtu+8jOebuOW6lOeahOagh+etvumaj+S5i+aUueWPmFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0LmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvR3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gY2F0ZUxpc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjYXRlZ29yeV9pZCA9PT0gY2F0ZUxpc3RbaV1bJ2lkJ10pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ3MgPSBjYXRlTGlzdFtpXVsndGFncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqIGluIHRhZ3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSB0YWdzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9ICQoJzxsYWJlbCBjbGFzcz1cInJhZGlvLWlubGluZVwiPjwvbGFiZWw+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZGlvID0gJCgnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ0YWdfaWRcIiB2YWx1ZT1cIicrdGFnWydpZCddKydcIj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5hcHBlbmQocmVkaW8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZCgnICcrdGFnWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvR3JvdXAuYXBwZW5kKGxhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDliJ3lp4vljJZVRWRpdG9yXHJcbkVkaXROb3ZlbC5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbigpe1xyXG4gICAgd2luZG93LnVlID0gVUUuZ2V0RWRpdG9yKFwiZWRpdG9yXCIse1xyXG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXHJcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJyxcclxuICAgIH0pXHJcbn07XHJcblxyXG5FZGl0Tm92ZWwucHJvdG90eXBlLmxpc3RlbklzRnJlZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBpc0ZyZWVJbnB1dCA9ICQoXCJzZWxlY3RbbmFtZT0naXNfZnJlZSddXCIpO1xyXG4gICAgdmFyIHByaWNlSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ncHJpY2UnXVwiKTtcclxuICAgIGlmKGlzRnJlZUlucHV0LnZhbCgpID09PSAnMScpIHtcclxuICAgICAgICBwcmljZUlucHV0LnNob3coKTtcclxuICAgIH1cclxuICAgIGlzRnJlZUlucHV0LmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykudmFsKCkgPT09ICcwJykge1xyXG4gICAgICAgICAgICBwcmljZUlucHV0LnZhbCgwKTtcclxuICAgICAgICAgICAgcHJpY2VJbnB1dC5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmKCQodGhpcykudmFsKCkgPT09ICcxJykge1xyXG4gICAgICAgICAgICBwcmljZUlucHV0LnZhbCgwKTtcclxuICAgICAgICAgICAgcHJpY2VJbnB1dC5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBwcmljZUlucHV0LmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykudmFsKCkgPT09IDApe1xyXG4gICAgICAgICAgICBpc0ZyZWVJbnB1dC5jaGlsZHJlbigpLmVxKDApLnByb3AoXCJzZWxlY3RlZFwiLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5FZGl0Tm92ZWwucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLmluaXRDYXRlZ29yeSgpO1xyXG4gICAgLy8g57yp55Wl5Zu+5LiK5Lyg5Yiw5pys5ZywXHJcbiAgICB0aGlzLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xyXG4gICAgLy8g57yp55Wl5Zu+5LiK5Lyg5Yiw5LiD54mb5LqRXHJcbiAgICAvLyB0aGlzLmxpc3RlblFpbml1VXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICB0aGlzLmluaXRVRWRpdG9yKCk7XHJcbiAgICB0aGlzLmxpc3RlblN1Ym1pdEV2ZW50KCk7XHJcblxyXG4gICAgdGhpcy5saXN0ZW5Jc0ZyZWVFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbigpe1xyXG4gICAgdmFyIGVkaXROb3ZlbCA9IG5ldyBFZGl0Tm92ZWwoKTtcclxuICAgIGVkaXROb3ZlbC5ydW4oKTtcclxuICAgIEVkaXROb3ZlbC5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XHJcbiAgICBFZGl0Tm92ZWwucHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbn0pOyJdLCJuYW1lcyI6WyJFZGl0Tm92ZWwiLCJwcm90b3R5cGUiLCJsaXN0ZW5VcGxvYWRGaWxlRXZlbnQiLCIkIiwiY2hhbmdlIiwiZmlsZSIsInRoaXMiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJteWFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwicGVyY2VudFRleHQiLCJ0b3RhbCIsInBlcmNlbnQiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NHcm91cCIsInNob3ciLCJwcm9ncmVzc0JhciIsImNzcyIsInRleHQiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJlcnJvciIsImhpZGUiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwia2V5IiwibGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQiLCJzZWxmIiwiZ2V0IiwidG9rZW4iLCJwdXRFeHRyYSIsImNvbmZpZyIsIm9ic2VydmFibGUiLCJvYnNlcnZlciIsImZuYW1lIiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwYXJhbXMiLCJtaW1lVHlwZSIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoxIiwidXBsb2FkIiwibmV4dCIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJub3ZlbElkIiwiYXR0ciIsImNvdmVyX3VybCIsImNhdGVnb3J5X2lkIiwidGFnX2lkIiwicHJpY2UiLCJwcm9maWxlIiwid2luZG93IiwidWUiLCJnZXRDb250ZW50IiwiaWQiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwiaW5pdENhdGVnb3J5Iiwic2VsZWN0IiwiY2F0ZWdvcnlJZCIsInBhcnNlSW50IiwicmFkaW9Hcm91cCIsInRhZ0lkIiwiY2F0ZUxpc3QiLCJpIiwiY2F0ZWdvcnkiLCJ0YWdzIiwiaiIsInRhZyIsImxhYmVsIiwicmVkaW8iLCJlbXB0eSIsImluaXRVRWRpdG9yIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJsaXN0ZW5Jc0ZyZWVFdmVudCIsImlzRnJlZUlucHV0IiwicHJpY2VJbnB1dCIsImNoaWxkcmVuIiwiZXEiLCJwcm9wIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxhQUtUQSxVQUFVQyxVQUFVQyxzQkFBd0IsV0FDeEJDLEVBQUUsa0JBQ1JDLE9BQU8sV0FDYixJQUFJQyxFQUFPRixFQUFFRyxNQUFNLEdBQUdDLE1BQU0sR0FDeEJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBT0wsR0FDdkJNLE9BQU9DLEtBQUssQ0FDUkMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBU0MsR0FDaEIsSUFDUUwsRUFEYyxNQUFuQkssRUFBYSxPQUNSTCxFQUFNSyxFQUFhLEtBQU8sSUFDVmYsRUFBRSxtQkFDUmdCLElBQUlOLFVBUXRDYixVQUFVQyxVQUFVbUIseUJBQTJCLFNBQVNGLEdBQ3BELElBRUlHLEVBRlFILEVBQU9JLE1BQ0NDLFFBQ01DLFFBQVEsR0FBSyxJQUNuQnhCLFVBQVV5QixjQUNoQkMsT0FDZCxJQUFJQyxFQUFjM0IsVUFBVTJCLFlBQzVCQSxFQUFZQyxJQUFJLFFBQVFQLEdBQ3hCTSxFQUFZRSxLQUFLUixJQUlyQnJCLFVBQVVDLFVBQVU2QixzQkFBd0IsU0FBU0MsR0FDN0IvQixVQUFVeUIsY0FDaEJP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
